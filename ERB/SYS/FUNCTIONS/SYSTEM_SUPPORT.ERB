;≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡
;변수 교체에 수반한 세이브 데이터 자동 수정 처리
;≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡
;=============================================================================
;수정 처리 본체
;=============================================================================
;--------------------------------------------------
;데이터의 로드시에 호출
;--------------------------------------------------
@EVENTLOAD
;현행 ver. 이전의 데이터를 읽었을 경우에는 수정 처리로
SIF LASTLOAD_VERSION < GAMEBASE_VERSION
    CALL SAVE_SUPPORT_OLDVERSION

;--------------------------------------------------
;수정 처리 범용 부분
;--------------------------------------------------
@SAVE_SUPPORT_OLDVERSION
RESULT = 0
;오래된 패치(2년 이상?)는 삭제하는 것을 제안 
;(그 쯤이면 어지간한 유저들은 패치가 되있을 테니까...)
;GAMEBASE.CSV의 버젼(バージョン)을 바꿔야 한다는 것을 명심

;2018년 5월 5일 패치
SIF LASTLOAD_VERSION < 3162 
    CALL SAVE_SUPPORT_VERSION_3162

SIF MONEY:100 == 0
    MONEY:100 = 1000000

;セーブバージョンフラグは廃止

IF RESULT == 1
    PRINTL 세이브 데이터를 현행 버전 것으로 수정하는 작업을 실행했습니다.
    PRINTW SHOP 메뉴가 표시되면 「[200] - 세이브」를 선택해주십시오.
ENDIF

;=============================================================================
;각 버전마다 수정 처리
;=============================================================================
;--------------------------------------------------
;2018년 5월 5일 패치
;--------------------------------------------------
@SAVE_SUPPORT_VERSION_3162
;딸, 밖으로 나간다 플래그 재정리
;성격 2,4,5를 클리어하면 8502가 ON, 성격 1,3을 클리어하면 8503이 ON되는 것을 성격별로 ON되게 바꿈.
;일단은 성격별로 다른 대사가 나오는 것이 목표였던 것 같음.
SIF FLAG:8502 == 1
    FLAG:8502 == 0
SIF FLAG:8503 == 1
    FLAG:8503 == 0

RETURN 1
